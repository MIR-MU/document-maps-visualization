<mat-drawer-container>
  <mat-drawer class="compare-sidenav" [ngClass]="{'comparing': comparingWindowOpen}" #drawer mode="side" position="end">
    <app-sidenav [selectedDocuments]="selectedDocuments"
                 [comparingWindowOpen]="comparingWindowOpen"
                 [searchQuery]="searchQuery"
                 (sidebarClose)="drawer.close()"
                 (compareClick)="handleCompareClick()"
    ></app-sidenav>
  </mat-drawer>
  <mat-drawer-content>
    <div class="graph-wrapper">
      <app-graph
        #graph
        *ngIf="graphData"
        [showLabels]="settings.showLabels"
        [data]="graphData"
        [minNormValue]="linkMin"
        [maxNormValue]="linkMax"
        [minZoom]="minZoom"
        [maxZoom]="maxZoom"
        [startZoom]="currentZoom"
        (nodeClicked)="handleNodeClick($event)"
        (emptyClicked)="clearSelection($event)"
        (zoomed)="handleZoomed($event)"
        width="1200"
        height="600"
      ></app-graph>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
<div class="ui-top-left">
  <div class="settings" [class.opened]="settingsOpen">
    <button mat-icon-button aria-label="Open/close settings" (click)="settingsOpen = !settingsOpen">
      <mat-icon>{{settingsOpen ? 'close' : 'settings'}}</mat-icon>
    </button>
    <app-settings *ngIf="settingsOpen" [(settings)]="settings"></app-settings>
  </div>
</div>
<div class="map-controls">
  <div class="center-control">
    <button mat-icon-button aria-label="Center map" (click)="centerCamera()">
      <mat-icon>adjust</mat-icon>
    </button>
  </div>
  <div class="zoom-controls">
    <button mat-icon-button aria-label="Increase zoom" (click)="increaseCamera()">
      <mat-icon>add_circle_outline</mat-icon>
    </button>
    <mat-slider vertical [min]="log2(minZoom)" [max]="log2(maxZoom)" [step]="defaultStepZoom" [value]="log2(currentZoom)" (valueChange)="changeCamera(pow2($event))"></mat-slider>
    <button mat-icon-button aria-label="Decrease zoom" (click)="decreaseCamera()">
      <mat-icon>remove_circle_outline</mat-icon>
    </button>
  </div>
</div>
<div class="error-legend" *ngIf="false">
  <div class="inner">
    <div class="bar"></div>
    <div class="up">Too close</div>
    <div class="middle">Perfect</div>
    <div class="bottom">Too far</div>
    <div class="indicator"><mat-icon svgIcon="chevron_left"></mat-icon></div>
  </div>
</div>
